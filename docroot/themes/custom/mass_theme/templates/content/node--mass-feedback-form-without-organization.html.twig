{% set reportMessage = false %}
{% set showHelp = false %}
{% set warnmsg = false %}
{% set helpText = "The feedback will only be used for improving the website." %}
{% set hiddenElements = [
  {
    "id": "node-id-hidden",
    "name": "node_id",
    "value": node.id,
    "class": "ma-feedback-hidden-field"
  }
] %}

{{ attach_library('mass_feedback_form/feedback-form-behaviors') }}

{% include "@organisms/feedback/mass-feedback.twig" with {

  "formAction": feedback_submission_api_endpoint,
  "formId": "feedback-form",
  "heading": "Help Us Improve Mass.gov",
  "title": {
    "value": "Did you find what you were looking for on this webpage?",
    "required": true
  },
  "inputGroup": {
    "type": "radio",
    "required": true,
    "inline": true,
    "items": [
      {
        "name": "info_found",
        "value": "Yes",
        "label": "Yes",
        "id": "info_found-yes",
        "checked": false,
      },
      {
        "name": "info_found",
        "id": "info_found-no",
        "value": "No",
        "label": "No",
        "checked": false,
      }
    ],
  },
  "queryAffirmative": {
    "value": "If you have any suggestions for the website, please let us know.",
    "required": false
  },
  "affirmativeTextarea": {
    "required": false,
    "maxlength": 500,
    "id": "explain-affirmative",
    "name": "explain",
    "describedBy": "helptext-feedback-no-response",
    "errorIds": "affirmative-textarea-error-alert"
  },
  "queryNegative": {
    "value": "How can we improve the page?",
    "required": true
  },
  "negativeTextarea": {
    "required": true,
    "maxlength": 500,
    "id": "explain-negative",
    "name": "explain",
    "errorMsg": "Please let us know how we can improve this page.",
    "describedBy": "helptext-feedback-no-response",
    "errorIds": "negative-textarea-error-alert"
  },
  "helpTip": {
    "textBefore": "Please do not include personal or contact information.",
    "textTrigger": "You will not get a response",
    "helpText": helpText,
    "id": "helptext-feedback-no-response",
    "expanded": false,
    "isDescription": true
  },
  "warnMsg": warnmsg,
  "alertMsg": "Please remove any contact information or personal data from your feedback. <strong>You will NOT get a response</strong>.",
  "alert": reportMessage,
  "hiddenElements": hiddenElements,
  "showWarnMsg": showHelp,
  "submitted": false,
  "success": {
    "before": "Thank you for your website feedback! We will use this information to improve this page.",
    "after": "If you would like to continue helping us improve Mass.gov, <a href='https://www.mass.gov/user-panel?utm_source=survey'>join our user panel</a> to test new features for the site."
  }
} %}
