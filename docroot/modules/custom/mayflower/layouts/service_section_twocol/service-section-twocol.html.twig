{% set heading = {} %}
{% if paragraph.field_hide_heading is not defined or paragraph.field_hide_heading.0.value == 0 %}
  {% set heading = {
    "title": (content.field_service_section_heading|field_value),
    "id": "",
    "borderless": true
  } %}
{% endif %}

{% set get_section_style = content.field_section_style.0['#markup']|replace({'_': '-'}) %}
{% set section_style_class = 'service-section--' ~ get_section_style %}
{% set hide_title_class = hide_heading ? 'service-section--hidden-title' : '' %}

{% set section_style_link = content.field_service_section_link.0 %}
{% set section_style_subtitle = content.field_subtitle.0 %}

<div class="service-section service-section--twocol {{ section_style_class }} {{ hide_title_class }}">

  {% embed "@organisms/by-author/stacked-row-section.twig" with {
    "stackedRowSection": heading,
    "stackedRow": {
      "borderless": true,
      "modifier": "no-sidebar"
    },
    "externalSidebar": true
  } %}

    {% block stackRowTitle %}
      {% if heading %}
        {% if section_style == 'enhanced' %}
          {% include "@atoms/04-headings/colored-heading-from-left.twig" with {
            "coloredHeadingFromLeft": {
              "bgColor": "blue",
              "title": (content.field_service_section_heading|field_value)
            }
          } %}
          {% if section_style_link or section_style_subtitle %}
            <div class="ma__service-heading-content">
              {% if section_style_subtitle %}
                <div class="ma__service-subtitle">{{ section_style_subtitle }}</div>
              {% endif %}
              {% if section_style_link %}
                <div class="ma__service-link">
                  <span class="ma__decorative-link">
                    <a href="{{ content.field_service_section_link[0]['#url'] }}" class="js-clickable-link">
                      {{ content.field_service_section_link[0]['#title'] }}
                      {{ icon('arrow') }}
                    </a>
                  </span>
                </div>
              {% endif %}
            </div>
          {% endif %}
        {% else %}
          <div class="ma__stacked-row__container">
            <div class="ma__stacked-row__title">
              {% set compHeading = {
                "title": stackedRowSection.title,
                "sub": "",
                "color": "",
                "id": stackedRowSection.id
              } %}
              {% include "@atoms/04-headings/comp-heading.twig" %}
            </div>
            {% if section_style_link or section_style_subtitle %}
              <div class="ma__service-heading-content">
                {% if section_style_subtitle %}
                  <div class="ma__service-subtitle">{{ section_style_subtitle }}</div>
                {% endif %}
                {% if section_style_link %}
                  <div class="ma__service-link">
                    <span class="ma__decorative-link">
                      <a href="{{ content.field_service_section_link[0]['#url'] }}" class="js-clickable-link">
                        {{ content.field_service_section_link[0]['#title'] }}
                        {{ icon('arrow') }}
                      </a>
                    </span>
                  </div>
                {% endif %}
              </div>
            {% endif %}
          </div>
        {% endif %}
      {% endif %}
    {% endblock %}

    {% block stackedRowContentOverride %}
      <div class="layout__region layout__region--left">
        {% for service_component in service_components if service_component.group == 'left' %}
          {{ service_component.items|view }}
        {% endfor %}
      </div>
      <div class="layout__region layout__region--right">
        {% for service_component in service_components if service_component.group == 'right' %}
          {{ service_component.items|view }}
        {% endfor %}
      </div>
    {% endblock %}

  {% endembed %}
</div>
